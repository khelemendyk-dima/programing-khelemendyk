# Лабораторна робота №2. Вступ до програмування. Основи debug процессу

## 1 Вимоги

### 1.1 Розробник

* Хелемендик Дмитро Олегович;
* студент групи КІТ-121д;
* 19-вер-2021.

### 1.2 Загальне завдання

Дана лабораторна спрямована на установку середовища для подальшої роботі з предмету “Програмування”.

## Хід роботи

### 1. Зареєструватися  на gitlab або github та створити там приватний репозиторій, склонуватися з створеного репозиторія, та скопіювати файли з зовнішнього репозиторія у під-директорію lab02, зафіксувати зміни :

Реєструюся на github та створюю там приватний репозиторій. Клоную репозиторі1 командою git clone, копіюю файли з зовнішнього репозиторія у під-директорію lab02. Фіксую зміни за допомогою команди git commit.


### 2.Виконати зміни, зібрати проект та продемонструвати зміни.

Додаю новий тип Тварини “Людина”, щоб він був у списку елементів, що виводиться на екран. Виконую зміни у файлі lib.h:
```
/**
 * Тип тварини
 */
enum animal_type {
	PIG, /**< Свиня */
	COW, /**< Корова */
	DOG, /**< Собака */
	CAT, /**< Кіт */
	HUMAN, /**< Людина */
	ANIMAL_TYPE_COUNT /**< Кількість тварин */
};
```
Також змінюю файл lib.c:
```
const char *get_animal_type_name(enum animal_type type)
{
	const char *result;
	switch (type) {
	case CAT:
		result = "Кіт";
		break;
	case DOG:
		result = "Собака";
		break;
	case COW:
		result = "Корова";
		break;
	case PIG:
		result = "Свиня";
		break;
	case HUMAN:
		result = "Людина";
		break;
	default:
		result = "N/A";
	}
	return result;
}
```
Збираю проект командою 'make all' та демонструю зміни командою './main.bin':

```
Інформація про тварину №01: Людина: зріст = 116 см, маса = 124 гр. 
Інформація про тварину №02: Свиня: зріст = 26 см, маса = 97 гр. 
Інформація про тварину №03: Собака: зріст = 85 см, маса = 24 гр. 
Інформація про тварину №04: Людина: зріст = 91 см, маса = 22 гр. 
Інформація про тварину №05: Кіт: зріст = 6 см, маса = 96 гр. 
Інформація про тварину №06: Людина: зріст = 21 см, маса = 0 гр. 
Інформація про тварину №07: Кіт: зріст = 90 см, маса = 40 гр. 
Інформація про тварину №08: Корова: зріст = 94 см, маса = 102 гр. 
Інформація про тварину №09: Людина: зріст = 111 см, маса = 61 гр. 
Інформація про тварину №10: Корова: зріст = 22 см, маса = 94 гр.
```
### 3. Відкрити в відлагоднику (debugger) lldb ваш виконуючий файл, зупинитися на будь-якій строці та визначити значення змінних.

Відкриваю в відлагоднику (debugger) lldb мій виконуючий файл командою 'lldb main.bin':

```
(lldb) target create "main.bin"
Current executable set to '/home/dima/dev/programing-khelemendyk/lab02/dist/main.bin' (x86_64).
```

Зупиняюсь на 43 строці командою 'b 43':

```
Breakpoint 1: where = main.bin`main + 34 at main.c:43:20, address = 0x0000000000401322

```
Далі запускаю процес командою 'r':

```
(lldb) target create "main.bin"
Current executable set to '/home/dima/dev/programing-khelemendyk/lab02/dist/main.bin' (x86_64).
(lldb) b 43
Breakpoint 1: where = main.bin`main + 34 at main.c:43:20, address = 0x0000000000401322
(lldb) r
Process 5847 launched: '/home/dima/dev/programing-khelemendyk/lab02/dist/main.bin' (x86_64)
Process 5847 stopped
* thread #1, name = 'main.bin', stop reason = breakpoint 1.1
    frame #0: 0x0000000000401322 main.bin`main at main.c:43:20
   40  		srand((unsigned int)time(0));
   41  		struct animal animals[ANIMAL_COUNT];
   42  	
-> 43  		for (unsigned int i = 0; i < ANIMAL_COUNT; i++) {
   44  			generate_animal(&animals[i]);
   45  		}
   46  		show_animals(animals, ANIMAL_COUNT);
```
Тепер дивлюсь значення змінних командою v:

```
(lldb) v
(animal [10]) animals = {
  [0] = (type = PIG, height = 0, weight = 0)
  [1] = (type = PIG, height = 0, weight = 0)
  [2] = (type = PIG, height = 0, weight = 4194368)
  [3] = (type = PIG, height = 11, weight = 0)
  [4] = (type = 0xffffdfa0, height = 32767, weight = 4294959993)
  [5] = (type = CAT | HUMAN | 0x7ff8, height = 4160558560, weight = 32767)
  [6] = (type = ANIMAL_TYPE_COUNT | 0x4013d8, height = 0, weight = 4160438216)
  [7] = (type = CAT | HUMAN | 0x7ff8, height = 4199312, weight = 0)
  [8] = (type = PIG, height = 0, weight = 4198512)
  [9] = (type = PIG, height = 4294959216, weight = 32767)
}
(unsigned int) i = 0
```

#### 3.1 Можливості відлагодника “Step in”, “Step over”, “Step out”

Step in - перейти до наступного кроку виконання програми. Якщо дія включає виклик функції, програма вступає у її реалізацію і припиняє виконання під час першої дії цієї реалізації. Щоб виконати:
```
(lldb) thread step-in

або

(lldb) s
```

Step over - перейти до наступного кроку виконання програми. Якщо дія передбачає виклик функції, вона не переходить до її реалізації (замість цього переступає через неї). Щоб виконати:

```
(lldb) thread step-over

або

(lldb) n
```

Step out - перейти до наступного кроку виконання. Ця команда дозволяє виконувати програму до тих пір, поки не буде повернуто реалізацію операції, яка наразі виконується. Щоб виконати:

```
(lldb) tread step-out

або

(lldb) f
```

### 4. Описати різницю режимів компіляції з інформацією про відлагодження та без неї.

Режим компіляції що надає інформацію про відлагодження містить в собі детальну інформацію про кожну змінну, що використовується в програмі, адреса пам'яті, використані типи даних та ін., а компіляція без інформації про відлагодження являє собою лишень оптимізованим кодом програми, не загромоджуючи користувача інформацією.

## Висновки

При виконанні даної лабораторної роботи було набуто практичного досвіду в роботі з відлагодником (debugger) lldb та його можливостями Step in, Step over, Step out.
