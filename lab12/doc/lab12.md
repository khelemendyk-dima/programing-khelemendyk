# Лабораторна робота №12. Строки (Null-terminated C Strings)

## 1. Вимоги

### 1.1 Розробник

* Хелемендик Дмитро Олегович;
* студент групи КІТ-121д;
* 09-січ-2022.

### 1.2 Загальне завдання

Знайти всі числа, які зустрічаються в тексті.

## 2. Опис програми

### 2.1 Функціональне призначення

Програма призначена для знаходження всіх чисел, які знаходяться в тексті. Програма працює за допомогою функцій, що задекларовані в *lib.h*, *stdlib.h*, *string.h*, *stdio.h* та *ctype.h*.

Результат зберігається у показчиках *array_of_int* та *array_of_float*.

Демонстрація знайдених результатів передбачає як покрокове виконання програми в режимі налагодження, так і видача даних у вікні консолі.

### 2.2 Опис логічної структури

Під час отримання даних з стандартного потоку:

- для отримання даних stdin використовується наступна конструкція `fgets(buffer_for_stdin, sizeof(buffer_for_stdin), stdin);`.

Під час друку дробової частини:

- для отримання двох знаків після крапки використовується наступна конструкція `printf("%.2f, ", *(arr_float + i));`.

Опис розроблених структур і функцій наводиться на базі результатів роботи системи автодокументування *Doxygen*.

#### Функція отримання даних про кількість цілих чисел

```
	int get_int(char buff[]);
```

*Призначення*: отримання кількості цілих чисел.

*Опис роботи*: функція зчитує буфер та повертає кількість цілих чисел.

**Аргументи**:

- *buff* - буфер;

#### Функція отримання даних про кількість дробових чисел

```
	int get_float(char buff[]);
```

*Призначення*: отримання кількості дробових чисел.

*Опис роботи*: функція зчитує буфер та повертає кількість дробових чисел.

**Аргументи**:

- *buff* - буфер;

#### Функція запису цілих чисел в показчик

```
	void get_num_int(char buff[], int *arr_int);
```

*Призначення*: заповнення показчика цілими числами.

*Опис роботи*: функція зчитує буфер та записує цілі числа в показчик.

**Аргументи**:

- *buff* - буфер;
- *arr_int* - показчик для цілих чисел. 

#### Функція запису дробових чисел в показчик

```
	void get_num_float(char buff[], float *arr_float);
```

*Призначення*: заповнення показчика дробовими числами.

*Опис роботи*: функція зчитує буфер та записує дробові числа в показчик.

**Аргументи**:

- *buff* - буфер;
- *arr_float* - показчик для дробових чисел. 

#### Функція друку результату

```
	void print_res(int *arr_int, float *arr_float, int num_int, int num_float);
```

*Призначення*: друк результату від знаходження цілих та дробових чисел та запису їх в показчики.

*Опис роботи*: функція друкує два показчики.

**Аргументи**:

- *arr_int* - показчик для цілих чисел;
- *arr_float* - показчик для дробових чисел;
- *num_int* - кількість цілих чисел;
- *num_float* - кількість дробових чисел.

#### Основна функція

```
	int main() 
```

*Призначення*: головна функція.

*Опис роботи*: 

 - створюю буфер для даних stdin з розміром N;
 - зчитую дані з stdin функцією fgets() та друкую їх;
 - створюю змінні num_int та num_float, та записую в них кількість цілих та дробових чисел за допогою функцій get_int та get_float, відповідно;
 - створюю змінну size та записую в неї загальну кількість чисел в тексті;
 - роблю перевірку на вміст чисел в тексті оператором if;
 - виділяю памʼять для двох масивів(один для цілих чисел, другий - для дробових);
 - виконую функції get_num_int та get_num_float для запису цілих і дробових чисел в показчики;
 - друкую результат шляхом виклику функції print_res;
 - звільнюю пам'ять;
 - успішний код повернення з програми (0).

### Структура проекту:

```
	└── lab12
	   ├── assets
	   │   └── input.txt
	   ├── doc
	   │   ├── lab12.docx
	   │   └── lab12.md
	   │   └── lab12.pdf
	   ├── Doxyfile
	   ├── Makefile
	   ├── README.md
	   ├── src
	   │   ├── lib.c
	   │   ├── lib.h
	   │   ├── main.c
	   └── test
	       └── test.c
```

### 2.3 Важливі фрагменти програми

#### Початкові дані. Константи, перерахування

```
	/**
	 * Розмір буферу
	 */
	#define N 1000
```

#### Отримання даних stdin використовується

```
	fgets(buffer_for_stdin, sizeof(buffer_for_stdin), stdin);
```

## 3. Варіанти використання

Для демонстрації результатів кожної задачі використовується:

- покрокове виконання програми в утиліті lldb;
- виконання програми у вікні консолі.

**Варіант використання 1**: послідовність дій для запуску програми у режимі відлагодження:

- запустити програму у відлагоднику lldb;
- поставити точку зупинки на функції main (строка з `return 0;`);
- запустити програму;
- ввести дані;
- подивитися результат виконання програми.

```
	(lldb) b 64
	Breakpoint 1: where = main.bin`main + 314 at main.c:64:2, address = 0x0000000000401c2a
	(lldb) r
	Process 6325 launched: '/home/dima/dev/programing-khelemendyk/lab12/dist/main.bin' (x86_64)
	Добрий день, мене звати Іван! Я продав 1 яблуко, 22 апельсинів, 333 кг бананів та 4 ящика гранатів. З продажи яблука я отримав 5 грн, апельсинів - 122.55 грн, бананів - 1500.64 грн, гранатів - 215.77 грн.
	Ваш текст:
	Добрий день, мене звати Іван! Я продав 1 яблуко, 22 апельсинів, 333 кг бананів та 4 ящика гранатів. З продажи яблука я отримав 5 грн, апельсинів - 122.55 грн, бананів - 1500.64 грн, гранатів - 215.77 грн.

	Результат:
	У цьому тексті 8 чисел.
	Знайдено 5 цілих чисел: 1, 22, 333, 4, 5.
	Знайдено 3 дробових числа: 122.55, 1500.64, 215.77.
	Process 6325 stopped
	* thread #1, name = 'main.bin', stop reason = breakpoint 1.1
	    frame #0: 0x0000000000401c2a main.bin`main at main.c:64:2
	   61  			free(array_of_int);
	   62  			free(array_of_float);
	   63  		}
	-> 64  		return 0;
	   65  	}
```

**Варіант використання 2**: запуск програми у вікні консолі:

- ввести дані у файл input.txt в директорії ./lab12/assets/input.txt
- запустити програму у консолі в папці проекту lab12 командою: cat ./assets/input.txt | ./dist/main.bin;
- подивитись результат програми.

```
	dima@dima-VirtualBox:~/dev/programing-khelemendyk/lab12$ cat ./assets/input.txt | ./dist/main.bin
	Ваш текст:
	Добрий день, мене звати Іван! Я продав 1 яблуко, 22 апельсинів, 333 кг бананів та 4 ящика гранатів. З продажи яблука я отримав 5 грн, апельсинів - 122.55 грн, бананів - 1500.64 грн, гранатів - 215.77 грн.

	Результат:
	У цьому тексті 8 чисел.
	Знайдено 5 цілих чисел: 1, 22, 333, 4, 5.
	Знайдено 3 дробових числа: 122.55, 1500.64, 215.77.
```

## Висновки

При виконанні даної лабораторної роботи було набуто практичного досвіду у взаємодії з строками.
